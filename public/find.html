<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>맛있는 코드 - 계정 찾기</title>
  <link rel="stylesheet" href="/css/page.css" />
  <link rel="stylesheet" href="/css/login.css" /> 
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic:400,700,800|Roboto:400|Didact+Gothic" rel="stylesheet" />
  <style>
    /* body, header, main layout styles are now covered by login.css */

    /* Tab styles - 아이디/비밀번호 찾기 페이지의 고유 스타일 */
    .find-tab-container {
      display: flex;
      margin-bottom: 2rem; 
      border-bottom: 2px solid #e5e7eb; 
    }
    
    .find-tab {
      flex: 1;
      padding: 1rem 0;
      font-size: 16px;
      font-weight: 700;
      color: #9ca3af;
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .find-tab.active {
      color: #3459ff; /* Primary color */
      border-bottom-color: #3459ff;
    }

    /* 폼 숨김 처리 */
    .hidden {
      display: none !important;
    }

    /* 아이디 찾기 결과 박스 스타일 */
    .id-result {
      text-align: center;
      padding: 2rem;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-top: 1.5rem;
      background-color: #f9fafb;
      display: none; /* 초기 숨김 */
      flex-direction: column;
      gap: 1rem;
    }

    .id-result.show {
      display: flex;
    }
    
    .id-result p {
      margin: 0;
      font-size: 15px;
      color: #4b5563;
    }

    .found-id {
      font-size: 20px;
      font-weight: 800;
      color: #3459ff; /* Primary color */
    }

    /* 폼 내부 요소의 간격 통일 */
    .submit-btn.full-width {
      margin-top: 1.5rem; 
      margin-bottom: 0;
    }
    
    .login-form .form-group label {
        display: block;
        font-size: 14px;
        font-weight: 700;
        color: #393939;
        margin-bottom: 0.5rem;
    }
    
  </style>
</head>
<body>
  <header class="login-header">
    <nav class="login-nav">
      <div class="nav-box">
        <a href="/index.html">
          <img src="/img/icons/logo.png" alt="맛있는 코드 로고" class="login-logo" />
        </a>
      </div>
      
      <div class="nav-right">
         <button class="nav-btn" onclick="location.href='/recipe_all.html'">레시피</button>
        <div class="vertical-divider"></div>
        <button class="nav-btn" onclick="location.href='/recipe_search.html'">추천받기</button>
      </div>
    </nav>
  </header>

  <main class="login-main">
    <div class="login-card">
      <h1 class="login-title">계정 찾기</h1>

      <div class="find-tab-container">
        <button id="tabId" class="find-tab active" onclick="switchTab('findId')">아이디 찾기</button>
        <button id="tabPw" class="find-tab" onclick="switchTab('findPw')">비밀번호 찾기</button>
      </div>

      <form class="login-form" id="findIdForm"> 
        <div class="form-group">
          <label>이름</label>
          <input type="text" id="nameInput" placeholder="이름을 입력하세요" class="input-field" />
        </div>
        
        <div class="form-group">
          <label>이메일</label>
          <input type="email" id="emailInputId" placeholder="example@email.com" class="input-field" />
        </div>

        <button type="button" id="findIdBtn" class="submit-btn full-width" onclick="findId()">아이디 찾기</button>

        <div class="id-result" id="idResult">
          <p>회원님의 아이디는</p>
          <p class="found-id" id="foundId"></p>
          <p>입니다.</p>
        </div>
      </form>

      <form class="login-form hidden" id="findPasswordForm">
        <div class="form-group">
          <label>아이디</label>
          <input type="text" id="idInputPw" placeholder="아이디를 입력하세요" class="input-field" />
        </div>
        
        <div class="form-group">
          <label>이메일</label>
          <input type="email" id="emailInputPw" placeholder="example@email.com" class="input-field" />
        </div>

        <button type="button" id="findPasswordBtn" class="submit-btn full-width" onclick="findPassword()">비밀번호 재설정 링크 받기</button>
      </form>
      
      <div class="login-links" style="margin-top: 30px;">
        <a href="/login.html"><button type="button">로그인</button></a>
        <span>|</span>
        <a href="/join.html"><button type="button">회원가입</button></a>
      </div>



 

    </div>
  </main>

  <script>
    // 탭 전환 기능
    function switchTab(tabName) {
      const idForm = document.getElementById('findIdForm');
      const pwForm = document.getElementById('findPasswordForm');
      const idTab = document.getElementById('tabId');
      const pwTab = document.getElementById('tabPw');
      const idResult = document.getElementById('idResult');
      
      if (tabName === 'findId') {
        idForm.classList.remove('hidden');
        pwForm.classList.add('hidden');
        idTab.classList.add('active');
        pwTab.classList.remove('active');
        idResult.classList.remove('show'); // 탭 전환 시 결과 숨김
      } else {
        idForm.classList.add('hidden');
        pwForm.classList.remove('hidden');
        idTab.classList.remove('active');
        pwTab.classList.add('active');
        idResult.classList.remove('show'); // 탭 전환 시 결과 숨김
      }
    }

    // 아이디 찾기 함수 (프론트엔드 목업: Local Storage 사용)
    function findId() {
      const name = document.getElementById('nameInput').value.trim();
      const email = document.getElementById('emailInputId').value.trim();
      const idResult = document.getElementById('idResult');
      const foundId = document.getElementById('foundId');

      if (!name || !email) {
        alert('이름과 이메일을 모두 입력해주세요.');
        return;
      }
      
      // 로컬 스토리지에서 유저 정보 확인
      const storedUser = localStorage.getItem('registeredUser');
      if (storedUser) {
        const registeredUser = JSON.parse(storedUser);
        
        // 이름과 이메일이 일치하는지 확인
        if (registeredUser.name === name && registeredUser.email === email) {
          foundId.textContent = registeredUser.userId;
          foundId.style.color = '#3459ff'; // 성공 색상
          idResult.classList.add('show');
          return;
        }
      }
      
      // 일치하는 정보가 없거나, 목업 데이터가 없는 경우
      foundId.textContent = '정보를 찾을 수 없습니다.';
      foundId.style.color = '#ef4444'; // 오류 색상
      idResult.classList.add('show');
    }

    // 비밀번호 찾기 함수 (프론트엔드 목업: Local Storage 사용)
    function findPassword() {
      const id = document.getElementById('idInputPw').value.trim();
      const email = document.getElementById('emailInputPw').value.trim();

      if (!id || !email) {
        alert('아이디와 이메일을 모두 입력해주세요.');
        return;
      }

      // 로컬 스토리지에서 유저 정보 확인
      const storedUser = localStorage.getItem('registeredUser');
      if (storedUser) {
        const registeredUser = JSON.parse(storedUser);

        // 아이디와 이메일이 일치하는지 확인
        if (registeredUser.userId === id && registeredUser.email === email) {
          // 실제로는 서버에서 이메일 발송 처리
          alert('비밀번호 재설정 링크가 등록된 이메일 주소로 발송되었습니다!');
          return;
        }
      }

      // 일치하는 정보가 없거나, 목업 데이터가 없는 경우
      alert('일치하는 회원 정보를 찾을 수 없습니다. 아이디와 이메일을 다시 확인해주세요.');
    }

    // 초기 폼 설정 및 Enter 키 이벤트 처리
    document.addEventListener('DOMContentLoaded', function() {
      // ✅ 초기 화면을 아이디 찾기 탭으로 설정
      switchTab('findId'); 
      
      // 아이디 찾기 폼 Enter 키
      document.getElementById('findIdForm').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          findId();
        }
      });

      // 비밀번호 찾기 폼 Enter 키
      document.getElementById('findPasswordForm').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          findPassword();
        }
      });
    });
  </script>

</body>
</html>